import{S as O,i as Y,s as Q,e as B,b as j,d as G,f as X,g as H,h as g,o as Z,v as ee,k,a as v,q as D,y as R,l as w,m as y,c as E,r as J,z as U,n as p,J as F,G as c,A as V,u as te,B as q,H as K}from"../chunks/index.03fbab45.js";import{g as ae,P as T,c as W,a as C,d as se,e as ne,s as re}from"../chunks/client.174da6be.js";import{L as ie}from"../chunks/loading.290574e3.js";import{B as z}from"../chunks/Button.0a85351d.js";/* empty css                                                        */const le=""+new URL("../assets/error.83af0d9d.png",import.meta.url).href,oe=""+new URL("../assets/whatsapp.81f7acc0.png",import.meta.url).href;function ce(u){let e,t,a,s,r,o,_,n,f,m,I,S,$,d,h,b,L,x,P;return d=new z({props:{href:"/",color:"blue",class:"mb-3",$$slots:{default:[fe]},$$scope:{ctx:u}}}),b=new z({props:{href:"https://wa.me/+6283815411488",color:"light",$$slots:{default:[me]},$$scope:{ctx:u}}}),{c(){e=k("div"),t=k("div"),a=v(),s=k("img"),o=v(),_=k("span"),n=D(u[1]),f=v(),m=k("p"),I=D(`Terjadi kesalahan. Mohon periksa kembali informasi yang Anda masukkan dan
      coba lagi. Jika masalah masih berlanjut, silakan hubungi tim dukungan kami
      via whatsapp.`),S=v(),$=k("div"),R(d.$$.fragment),h=v(),R(b.$$.fragment),L=v(),x=k("div"),this.h()},l(l){e=w(l,"DIV",{class:!0});var i=y(e);t=w(i,"DIV",{class:!0}),y(t).forEach(g),a=E(i),s=w(i,"IMG",{src:!0,alt:!0}),o=E(i),_=w(i,"SPAN",{class:!0});var A=y(_);n=J(A,u[1]),A.forEach(g),f=E(i),m=w(i,"P",{class:!0});var N=y(m);I=J(N,`Terjadi kesalahan. Mohon periksa kembali informasi yang Anda masukkan dan
      coba lagi. Jika masalah masih berlanjut, silakan hubungi tim dukungan kami
      via whatsapp.`),N.forEach(g),S=E(i),$=w(i,"DIV",{class:!0});var M=y($);U(d.$$.fragment,M),h=E(M),U(b.$$.fragment,M),M.forEach(g),L=E(i),x=w(i,"DIV",{class:!0}),y(x).forEach(g),i.forEach(g),this.h()},h(){p(t,"class","my-7"),F(s.src,r=le)||p(s,"src",r),p(s,"alt","Ilustrasi ibu yang sedang senang sampai melompat"),p(_,"class","text-base text-center font-bold mt-3"),p(m,"class","text-base text-center mt-2"),p($,"class","mt-7 flex flex-col"),p(x,"class","my-11"),p(e,"class","container w-full flex flex-col h-full items-center justify-center p-7")},m(l,i){j(l,e,i),c(e,t),c(e,a),c(e,s),c(e,o),c(e,_),c(_,n),c(e,f),c(e,m),c(m,I),c(e,S),c(e,$),V(d,$,null),c($,h),V(b,$,null),c(e,L),c(e,x),P=!0},p(l,i){(!P||i&2)&&te(n,l[1]);const A={};i&4&&(A.$$scope={dirty:i,ctx:l}),d.$set(A);const N={};i&4&&(N.$$scope={dirty:i,ctx:l}),b.$set(N)},i(l){P||(H(d.$$.fragment,l),H(b.$$.fragment,l),P=!0)},o(l){G(d.$$.fragment,l),G(b.$$.fragment,l),P=!1},d(l){l&&g(e),q(d),q(b)}}}function ue(u){let e,t;return e=new ie({}),{c(){R(e.$$.fragment)},l(a){U(e.$$.fragment,a)},m(a,s){V(e,a,s),t=!0},p:K,i(a){t||(H(e.$$.fragment,a),t=!0)},o(a){G(e.$$.fragment,a),t=!1},d(a){q(e,a)}}}function fe(u){let e;return{c(){e=D("Coba lagi")},l(t){e=J(t,"Coba lagi")},m(t,a){j(t,e,a)},d(t){t&&g(e)}}}function me(u){let e,t,a;return{c(){e=k("img"),a=D("Hubungi kami"),this.h()},l(s){e=w(s,"IMG",{src:!0,alt:!0,width:!0,class:!0}),a=J(s,"Hubungi kami"),this.h()},h(){F(e.src,t=oe)||p(e,"src",t),p(e,"alt","Whatsapp icon"),p(e,"width","24"),p(e,"class","mx-2")},m(s,r){j(s,e,r),j(s,a,r)},p:K,d(s){s&&g(e),s&&g(a)}}}function pe(u){let e,t,a,s;const r=[ue,ce],o=[];function _(n,f){return n[0]?0:n[1]?1:-1}return~(e=_(u))&&(t=o[e]=r[e](u)),{c(){t&&t.c(),a=B()},l(n){t&&t.l(n),a=B()},m(n,f){~e&&o[e].m(n,f),j(n,a,f),s=!0},p(n,[f]){let m=e;e=_(n),e===m?~e&&o[e].p(n,f):(t&&(ee(),G(o[m],1,1,()=>{o[m]=null}),X()),~e?(t=o[e],t?t.p(n,f):(t=o[e]=r[e](n),t.c()),H(t,1),t.m(a.parentNode,a)):t=null)},i(n){s||(H(t),s=!0)},o(n){G(t),s=!1},d(n){~e&&o[e].d(n),n&&g(a)}}}function _e(u,e,t){let a=!0,s;return Z(async()=>{if(!await ae())return;let{value:r}=await T.get({key:W.HAS_SIGNUP});if(r=JSON.parse(r),console.log(r),!r||!(r!=null&&r.user)&&!(r!=null&&r.inputs)){C("/landing");return}r.confirmed||C("/wait_confirm");const{user:o,inputs:{email:_,password:n,name:f,phone:m,no_str:I,role:S,address:$}}=r,{data:{session:d},error:h}=await se({email:_,password:n});if(t(1,s=h==null?void 0:h.name),!h&&d&&(await ne(d),await re.from("user_data").insert({id:o.id,name:f,contact:{phone:m},no_str:I,address:$,role:S})),t(0,a=!1),!s){await T.remove({key:W.HAS_SIGNUP}),C("/home");return}(h==null?void 0:h.status)==400&&(console.log("redirect"),C("/wait_confirm"),t(1,s=""))}),[a,s]}class ke extends O{constructor(e){super(),Y(this,e,_e,pe,Q,{})}}export{ke as component};
